<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Uçak Bagaj & Kargo Hesaplayıcı</title>
<link rel="manifest" href="manifest.json">
<style>
body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; }
h1 { font-size: 20px; margin-bottom:10px; }
section { background:white; padding:15px; border-radius:12px; margin-bottom:20px; box-shadow:0 2px 5px rgba(0,0,0,.1); }
label { display:block; margin-top:10px; }
input[type=number], input[type=text], select { width:100%; padding:8px; margin-top:4px; border:1px solid #ccc; border-radius:6px; font-size:15px; }
.result { margin-top:10px; font-weight:bold; }
</style>
</head>
<body>
<h1>Uçak Bagaj & Kargo Hesaplayıcı</h1>

<section>
  <h2>Uçak Tipi Seç</h2>
  <select id="aircraft">
    <option value="">-- Seç --</option>
    <option value="B737">Boeing 737 (1,2,3,4)</option>
    <option value="A319">Airbus A319 (11,12,41,42,51)</option>
    <option value="A320">Airbus A320 (11,12,13,31,32,41,42,5)</option>
    <option value="A321">Airbus A321 (11,12,21,22,23,31,32,33,41,42,5)</option>
    <option value="A330">Airbus A330 (1,2,3,4,5)</option>
    <option value="A350">Airbus A350 (1,2,3,4,5)</option>
    <option value="B777">Boeing 777 (1,2,3,4,5)</option>
    <option value="B787">Boeing 787 (1,2,3,4,5)</option>
    <option value="A319B">Airbus A319 Bulk (1,4.5)</option>
    <option value="A320B">Airbus A320 Bulk (1,3,4,5)</option>
    <option value="A321B">Airbus A321 Bulk (1,2,3,4,5)</option>
  </select>
</section>

<section>
  <h2>Yakıt Bilgisi</h2>
  <label>Total Fuel (kg)<input type="number" id="totalFuel" placeholder="örn. 12000"></label>
  <label>Taxi Fuel (kg)<input type="number" id="taxiFuel" placeholder="örn. 500"></label>
  <div class="result">Remaining Fuel: <span id="remainFuel">-</span> kg</div>
</section>

<section id="compartments">
  <h2>Kompartmanlar</h2>
  <label>Ortalama Bagaj Kg<input type="number" id="avgBag" placeholder="örn. 20"></label>
  <div id="compInputs"></div>
</section>

<section>
  <h2>Gelişmiş Hesap Makinesi</h2>
  <input type="text" id="calcInput" placeholder="Hesaplama gir (örn. 120+350*2)">
  <div class="result">Sonuç: <span id="calcResult">-</span></div>
</section>

<script>
const aircraftConfig = {
  "B737":["1","2","3","4"],
  "A319":["11","12","41","42","51"],
  "A320":["11","12","13","31","32","41","42","5"],
  "A321":["11","12","21","22","23","31","32","33","41","42","5"],
  "A330":["1","2","3","4","5"],
  "A350":["1","2","3","4","5"],
  "B777":["1","2","3","4","5"],
  "B787":["1","2","3","4","5"],
  "A319B":["1","4.5"],
  "A320B":["1","3","4","5"],
  "A321B":["1","2","3","4","5"]
};

document.getElementById("aircraft").addEventListener("change", buildCompartments);
document.getElementById("totalFuel").addEventListener("input", calcFuel);
document.getElementById("taxiFuel").addEventListener("input", calcFuel);
document.getElementById("avgBag").addEventListener("input", updateWeights);
document.getElementById("calcInput").addEventListener("input", calcExpression);

function calcFuel(){
  const total=+document.getElementById("totalFuel").value||0;
  const taxi=+document.getElementById("taxiFuel").value||0;
  document.getElementById("remainFuel").innerText= total-taxi;
}

function buildCompartments(){
  const ac=document.getElementById("aircraft").value;
  const wrap=document.getElementById("compInputs");
  wrap.innerHTML="";
  if(!ac) return;
  aircraftConfig[ac].forEach(c=>{
    const div=document.createElement("div");
    div.innerHTML=`<h3>Kompartman ${c}</h3>
      <label>Bagaj Sayısı <input type="number" data-type="bag" data-comp="${c}" placeholder="örn. 5"></label>
      <label>Kargo Kg <input type="number" data-type="cargo" data-comp="${c}" placeholder="örn. 200"></label>
      <div class="result">Toplam: <span id="res-${c}">0</span> kg</div>`;
    wrap.appendChild(div);
  });
  wrap.querySelectorAll("input").forEach(inp=>inp.addEventListener("input", updateWeights));
}

function updateWeights(){
  const avg=+document.getElementById("avgBag").value||0;
  document.querySelectorAll("#compInputs div").forEach(div=>{
    const c=div.querySelector("[data-comp]").dataset.comp;
    const bag=+div.querySelector("[data-type=bag]").value||0;
    const cargo=+div.querySelector("[data-type=cargo]").value||0;
    const total=bag*avg+cargo;
    div.querySelector("#res-"+c).innerText=total;
  });
}

function calcExpression(){
  let expr=document.getElementById("calcInput").value;
  try{
    if(expr.trim()==""){document.getElementById("calcResult").innerText="-";return;}
    let res=eval(expr);
    document.getElementById("calcResult").innerText=res;
  }catch(e){
    document.getElementById("calcResult").innerText="Hata";
  }
}

// PWA service worker
if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js'); }
</script>

</body>
</html>